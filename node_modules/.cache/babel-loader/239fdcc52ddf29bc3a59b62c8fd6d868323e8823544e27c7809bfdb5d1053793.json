{"ast":null,"code":"import _objectSpread from\"/workspaces/achiver-admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{db}from\"../firebase\";import{collection,getDocs,query,where}from\"firebase/firestore\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HomeworkTreeView=()=>{const[homeworkList,setHomeworkList]=useState([]);const[expanded,setExpanded]=useState({});useEffect(()=>{const fetchHomework=async()=>{const querySnapshot=await getDocs(collection(db,\"homework\"));const homeworkData=querySnapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setHomeworkList(homeworkData);};fetchHomework();},[]);const toggleExpand=async homeworkId=>{if(expanded[homeworkId]){setExpanded(prev=>_objectSpread(_objectSpread({},prev),{},{[homeworkId]:null}));}else{try{const submissionsRef=collection(db,\"homework_submissions\");const q=query(submissionsRef,where(\"homeworkId\",\"==\",homeworkId));const querySnapshot=await getDocs(q);const submissionData=querySnapshot.docs.map(doc=>doc.data());setExpanded(prev=>_objectSpread(_objectSpread({},prev),{},{[homeworkId]:submissionData}));}catch(error){console.error(\"Error fetching submissions:\",error.message);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen p-6 bg-gray-50\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Homework Submissions\"}),homeworkList.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No homework available.\"}):homeworkList.map(hw=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white shadow rounded mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:()=>toggleExpand(hw.id),className:\"cursor-pointer\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold\",children:hw.topic}),/*#__PURE__*/_jsx(\"p\",{children:hw.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Due: \",hw.dueDate]})]}),expanded[hw.id]&&/*#__PURE__*/_jsx(\"div\",{className:\"ml-4 mt-2 border-l-2 pl-4\",children:expanded[hw.id].length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No submissions for this topic.\"}):expanded[hw.id].map((sub,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 bg-gray-100 rounded mb-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"Name: \",sub.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",sub.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Remarks: \",sub.remarks||\"No remarks\"]}),/*#__PURE__*/_jsx(\"a\",{href:sub.attachmentUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-500 underline\",children:\"View Attachment\"})]},index))})]},hw.id))]});};export default HomeworkTreeView;","map":{"version":3,"names":["React","useEffect","useState","db","collection","getDocs","query","where","jsx","_jsx","jsxs","_jsxs","HomeworkTreeView","homeworkList","setHomeworkList","expanded","setExpanded","fetchHomework","querySnapshot","homeworkData","docs","map","doc","_objectSpread","id","data","toggleExpand","homeworkId","prev","submissionsRef","q","submissionData","error","console","message","className","children","length","hw","onClick","topic","description","dueDate","sub","index","name","email","remarks","href","attachmentUrl","target","rel"],"sources":["/workspaces/achiver-admin/src/pages/SubmittedHomeworkList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { db } from \"../firebase\";\r\nimport { collection, getDocs, query, where } from \"firebase/firestore\";\r\n\r\nconst HomeworkTreeView = () => {\r\n  const [homeworkList, setHomeworkList] = useState([]);\r\n  const [expanded, setExpanded] = useState({});\r\n\r\n  useEffect(() => {\r\n    const fetchHomework = async () => {\r\n      const querySnapshot = await getDocs(collection(db, \"homework\"));\r\n      const homeworkData = querySnapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n      setHomeworkList(homeworkData);\r\n    };\r\n    fetchHomework();\r\n  }, []);\r\n\r\n  const toggleExpand = async (homeworkId) => {\r\n    if (expanded[homeworkId]) {\r\n      setExpanded((prev) => ({ ...prev, [homeworkId]: null }));\r\n    } else {\r\n      try {\r\n        const submissionsRef = collection(db, \"homework_submissions\");\r\n        const q = query(submissionsRef, where(\"homeworkId\", \"==\", homeworkId));\r\n        const querySnapshot = await getDocs(q);\r\n        const submissionData = querySnapshot.docs.map((doc) => doc.data());\r\n        setExpanded((prev) => ({ ...prev, [homeworkId]: submissionData }));\r\n      } catch (error) {\r\n        console.error(\"Error fetching submissions:\", error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen p-6 bg-gray-50\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Homework Submissions</h2>\r\n      {homeworkList.length === 0 ? (\r\n        <p>No homework available.</p>\r\n      ) : (\r\n        homeworkList.map((hw) => (\r\n          <div key={hw.id} className=\"p-4 bg-white shadow rounded mb-4\">\r\n            <div onClick={() => toggleExpand(hw.id)} className=\"cursor-pointer\">\r\n              <h3 className=\"text-xl font-semibold\">{hw.topic}</h3>\r\n              <p>{hw.description}</p>\r\n              <p className=\"text-gray-600\">Due: {hw.dueDate}</p>\r\n            </div>\r\n            {expanded[hw.id] && (\r\n              <div className=\"ml-4 mt-2 border-l-2 pl-4\">\r\n                {expanded[hw.id].length === 0 ? (\r\n                  <p>No submissions for this topic.</p>\r\n                ) : (\r\n                  expanded[hw.id].map((sub, index) => (\r\n                    <div key={index} className=\"p-2 bg-gray-100 rounded mb-2\">\r\n                      <p className=\"font-semibold\">Name: {sub.name}</p>\r\n                      <p>Email: {sub.email}</p>\r\n                      <p>Remarks: {sub.remarks || \"No remarks\"}</p>\r\n                      <a\r\n                        href={sub.attachmentUrl}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"text-blue-500 underline\"\r\n                      >\r\n                        View Attachment\r\n                      </a>\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomeworkTreeView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}